import{R as n,j as e,m as o,S as I,a as _}from"./index-CVxrc5Ku.js";import{A as S}from"./index-DICw-uEz.js";const z=({personality:i,onClose:m})=>{const[d,r]=n.useState([{sender:"ai",text:`Сәлеметсіз бе! Мен ${i.name}. Көкейіңіздегі сұрағыңызды қойыңыз.`}]),[c,g]=n.useState(""),[x,h]=n.useState(!1),u=n.useRef(null),b=()=>{u.current?.scrollIntoView({behavior:"smooth"})};n.useEffect(b,[d]);const j=async a=>{if(a.preventDefault(),!c.trim()||x)return;const p={sender:"user",text:c};r(t=>[...t,p]),g(""),h(!0);const N=`Ты — ${i.name}. ${i.system_prompt_bio}. Отвечай на вопросы пользователя с точки зрения своей исторической личности, используя свои знания, ценности и опыт. Будь мудрым, рассудительным и говори на русском языке. Ответы должны быть краткими и по существу.`,f="https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=",s={contents:[{role:"user",parts:[{text:c}]}],systemInstruction:{parts:[{text:N}]},generationConfig:{temperature:.8,topP:1}};try{const t=await fetch(f,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!t.ok)throw new Error("API call failed.");const y=(await t.json()).candidates?.[0]?.content?.parts?.[0]?.text;r(w=>[...w,{sender:"ai",text:y||"Кешіріңіз, мен қазір жауап бере алмаймын."}])}catch(t){console.error(t),r(l=>[...l,{sender:"ai",text:"Техникалық ақауларға байланысты жауап беру мүмкін болмады."}])}finally{h(!1)}};return e.jsx(o.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/70 z-50 flex items-center justify-center p-4 backdrop-blur-sm",onClick:m,children:e.jsxs(o.div,{initial:{scale:.9,y:20},animate:{scale:1,y:0},exit:{scale:.9,y:20},className:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl h-[80vh] flex flex-col p-6 relative card-kazakh",onClick:a=>a.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center mb-4 pb-4 border-b border-slate-200",children:[e.jsx("img",{src:i.image,alt:i.name,className:"w-12 h-12 rounded-full mr-4 object-cover"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:i.name}),e.jsx("p",{className:"text-slate-500",children:"Сізбен диалогта"})]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto pr-2 space-y-4",children:[d.map((a,p)=>e.jsxs("div",{className:`flex items-end gap-2 ${a.sender==="user"?"justify-end":"justify-start"}`,children:[a.sender==="ai"&&e.jsx("img",{src:i.image,className:"w-8 h-8 rounded-full object-cover"}),e.jsx("div",{className:`max-w-xs md:max-w-md p-3 rounded-2xl ${a.sender==="user"?"bg-teal-600 text-white rounded-br-none":"bg-slate-200 text-slate-800 rounded-bl-none"}`,children:e.jsx("p",{children:a.text})})]},p)),x&&e.jsxs("div",{className:"flex items-end gap-2 justify-start",children:[e.jsx("img",{src:i.image,className:"w-8 h-8 rounded-full object-cover"}),e.jsx("div",{className:"max-w-xs md:max-w-md p-3 rounded-2xl bg-slate-200 text-slate-800 rounded-bl-none",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-slate-400 rounded-full animate-pulse"}),e.jsx("div",{className:"w-2 h-2 bg-slate-400 rounded-full animate-pulse [animation-delay:0.2s]"}),e.jsx("div",{className:"w-2 h-2 bg-slate-400 rounded-full animate-pulse [animation-delay:0.4s]"})]})})]}),e.jsx("div",{ref:u})]}),e.jsxs("form",{onSubmit:j,className:"mt-4 flex items-center gap-2",children:[e.jsx("input",{type:"text",value:c,onChange:a=>g(a.target.value),placeholder:`${i.name}-мен сөйлесу...`,className:"flex-1 p-3 border border-slate-300 rounded-full focus:ring-2 focus:ring-teal-500 focus:outline-none"}),e.jsx("button",{type:"submit",disabled:x,className:"bg-teal-600 text-white p-3 rounded-full hover:bg-teal-700 disabled:bg-slate-400 transition-colors",children:e.jsx(I,{className:"w-6 h-6"})})]})]})})},C={abai:{name:"Абай Құнанбайұлы",description:"Сен ойшыл, сабырлы, рухани терең тұлғасың. Әділет, білім мен еңбек құндылықтарын жоғары қоясың.",image:encodeURI("/Абай Құнанбайұлы.jpg"),system_prompt_bio:"Ұлы ақын, ойшыл. Даналыққа, парасатқа, еңбек пен білімге үндейді."},bauyrzhan:{name:"Бауыржан Момышұлы",description:"Ержүрек, жауапкершілігі жоғары, әділеттілікті сүйесің. Қиында батыл шешім қабылдап, қорғайсың.",image:encodeURI("/Бауыржан Момышұлы.jpg"),system_prompt_bio:"Әскери қолбасшы, батыр. Тәртіп, намыс, төзімділік құндылықтарын дәріптейді."},tomyris:{name:"Томирис патшайым",description:"Әділет пен тәуелсіздікті бәрінен жоғары қоясың. Әлсізді қорғайсың, еркіндік пен теңдік — өмір мәні.",image:encodeURI("/Томирис.jpg"),system_prompt_bio:"Массагет патшайымы. Еркіндік пен әділдік жолындағы күрестің символы."},ahmet:{name:"Ахмет Байтұрсынұлы",description:"Ағартушылық пен білім — сенің жолың. Сөздің күші мен тілдің қасиетін қорғайсың.",image:encodeURI("/Ахмет Байтұрсынұлы.jpg"),system_prompt_bio:"Ұлт ұстазы, тілші, ағартушы. Қазақ тіл білімінің негізін қалаушылардың бірі."},alikhan:{name:"Әлихан Бөкейхан",description:"Халықтың қамын ойлайтын көшбасшысың. Бірлікке, әділ қоғамға, демократияға ұмтыласың.",image:encodeURI("/Әлихан Бөкейхан.jpg"),system_prompt_bio:"Алаш қозғалысының жетекшісі, саяси қайраткер. Стратегиялық ойлау мен жауапкершілікті алдыңғы орынға қояды."}},v=[{text:"1. Қиын жағдай туындағанда сен не істейсің?",options:[{text:"A) Сабыр сақтап, терең ойланамын (Абай Құнанбайұлы)",weights:{abai:3}},{text:"B) Тактиканы өзгертіп, нақты шешім қабылдаймын (Бауыржан Момышұлы)",weights:{bauyrzhan:3}},{text:"C) Елдің мүддесін қорғаймын, күреске шығамын (Томирис патшайым)",weights:{tomyris:3}},{text:"D) Адамдарды біліммен, сөзбен оятамын (Ахмет Байтұрсынұлы)",weights:{ahmet:3}},{text:"E) Ұлтты біріктіру жолында идея іздеймін (Әлихан Бөкейхан)",weights:{alikhan:3}}]},{text:"2. Саған ең маңызды құндылық қайсысы?",options:[{text:"A) Ақыл мен парасат (Абай)",weights:{abai:3}},{text:"B) Ерлік пен намыс (Бауыржан)",weights:{bauyrzhan:3}},{text:"C) Тәуелсіздік пен азаттық (Томирис)",weights:{tomyris:3}},{text:"D) Білім мен ағарту (Ахмет)",weights:{ahmet:3}},{text:"E) Бірлік пен ел басқару (Әлихан)",weights:{alikhan:3}}]},{text:"3. Досың қиындыққа тап болса, сен...",options:[{text:"A) Оны сабырға шақырып, ақыл беремін (Абай)",weights:{abai:3}},{text:"B) Бірге күресемін, қорғаймын (Бауыржан)",weights:{bauyrzhan:3}},{text:"C) Оның намысын қорғау үшін алға шығамын (Томирис)",weights:{tomyris:3}},{text:"D) Түсіндіріп, бағыт көрсетемін (Ахмет)",weights:{ahmet:3}},{text:"E) Қиындықты жүйелі түрде шешуге көмектесемін (Әлихан)",weights:{alikhan:3}}]},{text:"4. Егер сенде үлкен мүмкіндік болса, сен не істер едің?",options:[{text:"A) Халықты рухани байытуға атсалысамын (Абай)",weights:{abai:3}},{text:"B) Елдің қорғанысын күшейтер едім (Бауыржан)",weights:{bauyrzhan:3}},{text:"C) Әйелдің, ананың мәртебесін көтерер едім (Томирис)",weights:{tomyris:3}},{text:"D) Қазақ тілін дамытуға, білім таратуға жұмыс жасар едім (Ахмет)",weights:{ahmet:3}},{text:"E) Әділ қоғам орнатуға күш саламын (Әлихан)",weights:{alikhan:3}}]},{text:"5. Қандай сипат өзіңе тән деп ойлайсың?",options:[{text:"A) Терең ойлы, парасатты (Абай)",weights:{abai:3}},{text:"B) Батыл, табанды (Бауыржан)",weights:{bauyrzhan:3}},{text:"C) Ер мінезді, намысты (Томирис)",weights:{tomyris:3}},{text:"D) Сөзге шешен, ұстаздық қабілеті бар (Ахмет)",weights:{ahmet:3}},{text:"E) Көшбасшы, ұйымдастырушы (Әлихан)",weights:{alikhan:3}}]}];function E(){const i=_(),[m,d]=n.useState("start"),[r,c]=n.useState(0),[g,x]=n.useState(Object.keys(C).reduce((s,t)=>({...s,[t]:0}),{})),[h,u]=n.useState(null),[b,j]=n.useState(null),a=()=>d("quiz"),p=s=>{const t={...g};for(const l in s)t[l]+=s[l];if(x(t),r<v.length-1)c(l=>l+1);else{const l=Object.keys(t).reduce((y,w)=>t[y]>t[w]?y:w);u(l),d("result")}},N=()=>{d("start"),c(0),x(Object.keys(C).reduce((s,t)=>({...s,[t]:0}),{})),u(null)},k=v[r],f=(r+1)/v.length*100;return e.jsxs("div",{className:"container mx-auto max-w-4xl px-4 py-10",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx(o.h1,{initial:{opacity:0,y:12},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-3xl md:text-5xl font-extrabold tracking-tight",children:e.jsx("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-[#1F7A8C] via-[#1aa6b5] to-[#0ea5a5]",children:"Тарихи тұлға тесті"})}),e.jsx("div",{className:"mx-auto mt-4 h-[3px] w-24 rounded-full bg-gradient-to-r from-[#1F7A8C] to-[#FFD580]"})]}),e.jsx("div",{className:"rounded-2xl p-6 md:p-10 bg-white/80 backdrop-blur-xl border border-slate-200/70 shadow-[0_10px_30px_rgba(16,37,66,0.06)]",children:e.jsxs(S,{mode:"wait",children:[m==="start"&&e.jsxs(o.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},exit:{opacity:0,y:-8},className:"text-center",children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-extrabold text-slate-900 mb-4",children:"Сіз Қазақстанның қай тарихи тұлғасына ұқсайсыз?"}),e.jsx("p",{className:"max-w-2xl mx-auto text-lg text-slate-600 mb-8",children:"Бірнеше сұраққа жауап беріп, қай тарихи тұлғаның рухы сізге жақын екенін анықтаңыз."}),e.jsx("button",{onClick:a,className:"btn btn-primary btn-xl",children:"Тестті бастау"}),e.jsx("div",{className:"mt-6",children:e.jsx("button",{onClick:()=>i(-1),className:"btn btn-terтіary",children:"⟵ Басты бетке"})})]},"start"),m==="quiz"&&e.jsxs(o.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},exit:{opacity:0,y:-8},children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("div",{className:"w-full bg-slate-200/70 rounded-full h-2.5 overflow-hidden",children:e.jsx(o.div,{className:"h-2.5 rounded-full bg-gradient-to-r from-[#1F7A8C] via-[#1aa6b5] to-[#0ea5a5]",style:{width:`${f}%`},initial:{width:0},animate:{width:`${f}%`},transition:{duration:.45,ease:"easeOut"}})}),e.jsxs("div",{className:"mt-2 text-right text-xs text-slate-500",children:[r+1," / ",v.length]})]}),e.jsx("h3",{className:"text-2xl md:text-3xl font-bold text-center text-slate-900 mb-6",children:k.text}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:k.options.map((s,t)=>e.jsx(o.button,{onClick:()=>p(s.weights),whileHover:{y:-2},whileTap:{scale:.98},className:"group text-left rounded-xl border-2 border-slate-200/70 bg-white p-4 hover:border-teal-500/70 hover:bg-teал-50/60 transition-all",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"mt-0.5 h-2.5 w-2.5 rounded-full bg-teal-500/70 group-hover:bg-teal-600"}),e.jsx("span",{className:"text-slate-700 group-hover:text-slate-900",children:s.text})]})},t))})]},"quiz"),m==="result"&&h&&e.jsx(o.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},exit:{opacity:0,y:-8},children:(()=>{const s=C[h];return e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-sm md:text-base tracking-wide uppercase text-teal-600 mb-2",children:"Сіздің тұлғаңыз"}),e.jsx("h2",{className:"text-3xl md:text-4xl font-extrabold text-slate-900 mb-3",children:e.jsx("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-[#1F7A8C] to-[#0ea5a5]",children:s.name})}),e.jsx("img",{src:s.image,alt:s.name,className:"w-40 h-40 md:w-48 md:h-48 rounded-full mx-auto mb-6 shadow-xl border-4 border-white object-cover",onError:t=>{t.currentTarget.src="https://placehold.co/400x400/cccccc/ffffff?text=Image+Not+Found"}}),e.jsx("p",{className:"text-base md:text-lg text-slate-700 max-w-2xl mx-auto mb-8",children:s.description}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[e.jsx("button",{onClick:N,className:"btn btn-tertiary",children:"Тестті қайта өту"}),e.jsxs("button",{onClick:()=>j(s),className:"btn btn-primary",children:["✨ ",s.name.split(" ")[0],"мен сөйлесу"]})]})]})})()},"result")]})}),e.jsx(S,{children:b&&e.jsx(z,{personality:b,onClose:()=>j(null)})})]})}export{E as default};
//# sourceMappingURL=HistoricalQuiz-CSpUaKcK.js.map

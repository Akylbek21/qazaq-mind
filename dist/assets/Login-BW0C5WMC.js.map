{"version":3,"file":"Login-BW0C5WMC.js","sources":["../../src/pages/Login.jsx"],"sourcesContent":["// src/pages/Login.jsx\r\nimport React, { useState, useEffect } from \"react\";\r\nimport { useLocation, useNavigate, useSearchParams, Link } from \"react-router-dom\";\r\nimport { motion } from \"framer-motion\";\r\nimport { useAuth } from \"@/auth/AuthContext\";\r\n\r\nconst EyeIcon = ({ className = \"w-5 h-5\" }) => (\r\n  <svg className={className} fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={1.5}\r\n      d=\"M2.036 12.322a1.012 1.012 0 0 1 0-.644C3.423 7.51 7.355 5 12 5c4.645 0 8.577 2.51 9.964 6.678.07.214.07.43 0 .644C20.577 16.49 16.645 19 12 19c-4.645 0-8.577-2.51-9.964-6.678Z\" />\r\n    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={1.5}\r\n      d=\"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z\" />\r\n  </svg>\r\n);\r\n\r\nconst EyeOffIcon = ({ className = \"w-5 h-5\" }) => (\r\n  <svg className={className} fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={1.5}\r\n      d=\"M3.98 8.223C5.83 6.084 8.708 5 12 5c4.645 0 8.577 2.51 9.964 6.678.07.214.07.43 0 .644-.457 1.38-1.186 2.62-2.134 3.667M6.94 6.94 3 3m0 0 18 18M3 3l4.243 4.243M9 9a3 3 0 0 0 4.243 4.243\" />\r\n  </svg>\r\n);\r\n\r\nexport default function Login() {\r\n  const [form, setForm] = useState({ username: \"\", password: \"\" });\r\n  const [showPass, setShowPass] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  const [err, setErr] = useState(\"\");\r\n  const [info, setInfo] = useState(\"\");\r\n\r\n  const { login } = useAuth();\r\n  const nav = useNavigate();\r\n  const loc = useLocation();\r\n  const [params] = useSearchParams();\r\n  const from = loc.state?.from ?? \"/\";\r\n\r\n  useEffect(() => {\r\n    if (params.get(\"expired\") === \"1\") setErr(\"Сессия истекла. Войдите снова.\");\r\n    if (params.get(\"registered\") === \"1\") setInfo(\"Регистрация прошла успешно. Войдите в аккаунт.\");\r\n  }, [params]);\r\n\r\n  const onSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setErr(\"\");\r\n    setInfo(\"\");\r\n\r\n    const username = form.username.trim();\r\n    const password = form.password;\r\n\r\n    if (!username) return setErr(\"Логинді жазыңыз.\");\r\n    if (!password) return setErr(\"Құпиясөзді жазыңыз.\");\r\n\r\n    setLoading(true);\r\n    try {\r\n      await login({ username, password });\r\n      nav(from, { replace: true });\r\n    } catch (e) {\r\n      setErr(e?.response?.data?.message || e?.message || \"Кіру мүмкін болмады. Кейінірек қайтадан көріңіз.\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"relative min-h-screen overflow-hidden bg-gradient-to-br from-slate-50 via-teal-50 to-cyan-50\">\r\n      <div className=\"pointer-events-none absolute -top-24 left-1/2 h-72 w-72 -translate-x-1/2 rounded-full bg-cyan-300/30 blur-3xl\" />\r\n      <div className=\"pointer-events-none absolute -bottom-24 right-10 h-72 w-72 rounded-full bg-teal-300/30 blur-3xl\" />\r\n\r\n      <div className=\"relative z-10 mx-auto flex min-h-screen max-w-7xl items-center justify-center px-4\">\r\n        <motion.div\r\n          initial={{ opacity: 0, y: 14 }}\r\n          animate={{ opacity: 1, y: 0 }}\r\n          transition={{ duration: 0.45, ease: \"easeOut\" }}\r\n          className=\"w-full max-w-md\"\r\n        >\r\n          <div className=\"rounded-3xl border border-white/60 bg-white/70 p-8 shadow-2xl backdrop-blur-xl\">\r\n            <div className=\"mb-6 text-center\">\r\n              <h1 className=\"bg-gradient-to-r from-teal-600 via-cyan-600 to-sky-600 bg-clip-text text-3xl font-extrabold tracking-tight text-transparent\">\r\n                Qazaq Mind\r\n              </h1>\r\n              <p className=\"mt-1 text-sm text-slate-600\">Кіру</p>\r\n            </div>\r\n\r\n            {info && (\r\n              <div className=\"mb-4 rounded-xl border border-teal-100 bg-teal-50 px-4 py-3 text-sm text-teal-700\">\r\n                {info}\r\n              </div>\r\n            )}\r\n            {err && (\r\n              <div className=\"mb-4 rounded-xl border border-red-100 bg-red-50 px-4 py-3 text-sm text-red-700\">\r\n                {err}\r\n              </div>\r\n            )}\r\n\r\n            <form onSubmit={onSubmit} className=\"space-y-4\">\r\n              <div>\r\n                <label className=\"mb-1 block text-sm font-medium text-slate-700\">Логин</label>\r\n                <input\r\n                  className=\"w-full rounded-xl border border-slate-200 bg-white/80 px-4 py-3 text-slate-900 outline-none ring-0 transition focus:border-teal-400 focus:bg-white focus:shadow-[0_0_0_4px_rgba(13,148,136,0.08)]\"\r\n                  placeholder=\"username\"\r\n                  value={form.username}\r\n                  onChange={(e) => setForm({ ...form, username: e.target.value })}\r\n                  autoComplete=\"username\"\r\n                  required\r\n                  inputMode=\"text\"\r\n                />\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"mb-1 block text-sm font-medium text-slate-700\">Құпиясөз</label>\r\n                <div className=\"relative\">\r\n                  <input\r\n                    className=\"w-full rounded-xl border border-slate-200 bg-white/80 px-4 py-3 pr-12 text-slate-900 outline-none transition focus:border-teal-400 focus:bg-white focus:shadow-[0_0_0_4px_rgba(13,148,136,0.08)]\"\r\n                    placeholder=\"password\"\r\n                    type={showPass ? \"text\" : \"password\"}\r\n                    value={form.password}\r\n                    onChange={(e) => setForm({ ...form, password: e.target.value })}\r\n                    autoComplete=\"current-password\"\r\n                    required\r\n                  />\r\n                  <button\r\n                    type=\"button\"\r\n                    onClick={() => setShowPass((s) => !s)}\r\n                    className=\"absolute inset-y-0 right-3 my-auto inline-flex h-8 w-8 items-center justify-center rounded-lg text-slate-500 hover:bg-slate-100\"\r\n                    aria-label={showPass ? \"Құпиясөзді жасыру\" : \"Құпиясөзді көрсету\"}\r\n                  >\r\n                    {showPass ? <EyeOffIcon /> : <EyeIcon />}\r\n                  </button>\r\n                </div>\r\n              </div>\r\n\r\n              <button\r\n                type=\"submit\"\r\n                disabled={loading || !form.username.trim() || !form.password}\r\n                className=\"group relative mt-2 inline-flex w-full items-center justify-center gap-2 rounded-xl bg-gradient-to-r from-teal-600 to-cyan-600 px-5 py-3 font-semibold text-white shadow-lg transition hover:from-teal-500 hover:to-cyan-500 disabled:cursor-not-allowed disabled:opacity-70\"\r\n              >\r\n                {loading ? (\r\n                  <>\r\n                    <svg className=\"h-5 w-5 animate-spin\" viewBox=\"0 0 24 24\" aria-hidden=\"true\">\r\n                      <circle cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\" className=\"opacity-25 fill-transparent\" />\r\n                      <path d=\"M4 12a8 8 0 0 1 8-8\" className=\"opacity-75\" fill=\"currentColor\" />\r\n                    </svg>\r\n                    Кіру...\r\n                  </>\r\n                ) : (\r\n                  \"Войти\"\r\n                )}\r\n              </button>\r\n            </form>\r\n\r\n            <div className=\"mt-5 flex items-center justify-between text-sm text-slate-600\">\r\n              <Link to=\"/register\" className=\"rounded-lg px-2 py-1 text-teal-700 hover:bg-teal-50\">\r\n                Аккаунт жоқ па? Тіркелу\r\n              </Link>\r\n              <span className=\"text-slate-400\">•</span>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"mt-6 text-center text-xs text-slate-500\">\r\n            © {new Date().getFullYear()} Qazaq Mind\r\n          </div>\r\n        </motion.div>\r\n      </div>\r\n    </div>\r\n  );\r\n}"],"names":["EyeIcon","className","jsxs","jsx","EyeOffIcon","Login","form","setForm","useState","showPass","setShowPass","loading","setLoading","err","setErr","info","setInfo","login","useAuth","nav","useNavigate","loc","useLocation","params","useSearchParams","from","useEffect","onSubmit","e","username","password","motion","Fragment","Link"],"mappings":"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"}
{"version":3,"file":"Register-Bili7GnK.js","sources":["../../src/pages/Register.jsx"],"sourcesContent":["// src/pages/Register.jsx\r\nimport React, { useState } from \"react\";\r\nimport { useNavigate, Link } from \"react-router-dom\";\r\nimport { motion } from \"framer-motion\";\r\nimport { useAuth } from \"@/auth/AuthContext\";\r\n\r\nconst EyeIcon = ({ className = \"w-5 h-5\" }) => (\r\n  <svg className={className} fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={1.5}\r\n      d=\"M2.036 12.322a1.012 1.012 0 0 1 0-.644C3.423 7.51 7.355 5 12 5c4.645 0 8.577 2.51 9.964 6.678.07.214.07.43 0 .644C20.577 16.49 16.645 19 12 19c-4.645 0-8.577-2.51-9.964-6.678Z\" />\r\n    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={1.5}\r\n      d=\"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z\" />\r\n  </svg>\r\n);\r\n\r\nconst EyeOffIcon = ({ className = \"w-5 h-5\" }) => (\r\n  <svg className={className} fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={1.5}\r\n      d=\"M6.94 6.94 3 3m0 0 18 18M3 3l4.243 4.243M12 5c4.645 0 8.577 2.51 9.964 6.678.07.214.07.43 0 .644-.457 1.38-1.186 2.62-2.134 3.667M9 9a3 3 0 0 0 4.243 4.243\" />\r\n  </svg>\r\n);\r\n\r\nexport default function Register() {\r\n  const nav = useNavigate();\r\n  const { register } = useAuth();\r\n\r\n  const [form, setForm] = useState({\r\n    username: \"\",\r\n    password: \"\",\r\n    confirm: \"\",\r\n    role: \"STUDENT\", // всегда UPPERCASE\r\n  });\r\n\r\n  const [showPass, setShowPass] = useState(false);\r\n  const [showConfirm, setShowConfirm] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  const [err, setErr] = useState(\"\");\r\n\r\n  const usernameTrimmed = form.username.trim();\r\n  const canSubmit =\r\n    !!usernameTrimmed &&\r\n    form.password.length >= 6 &&\r\n    form.password === form.confirm &&\r\n    !loading;\r\n\r\n  const onSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setErr(\"\");\r\n\r\n    if (!usernameTrimmed) return setErr(\"Логинді жазыңыз.\");\r\n    if (form.password.length < 6) return setErr(\"Құпиясөз 6 символдан кем болмауы керек.\");\r\n    if (form.password !== form.confirm) return setErr(\"Құпиясөздер сәйкес емес.\");\r\n\r\n    setLoading(true);\r\n    try {\r\n      const data = await register({\r\n        username: usernameTrimmed,\r\n        password: form.password,\r\n        role: form.role, // STUDENT | TEACHER | PARENT\r\n      });\r\n\r\n      // Если бэк сразу вернул токен (автовход), уводим на главную.\r\n      // Иначе — на форму входа с флажком registered=1.\r\n      if (data?.token) {\r\n        nav(\"/\", { replace: true });\r\n      } else {\r\n        nav(\"/login?registered=1\", { replace: true });\r\n      }\r\n    } catch (e) {\r\n      setErr(e?.response?.data?.message || e?.message || \"Қолданушыны тіркеу кезінде қате пайда болды.\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const RoleButton = ({ value, label }) => {\r\n    const active = form.role === value;\r\n    return (\r\n      <button\r\n        type=\"button\"\r\n        onClick={() => setForm((f) => ({ ...f, role: value }))}\r\n        className={[\r\n          \"flex-1 rounded-xl px-3 py-2 text-sm font-medium transition\",\r\n          active\r\n            ? \"bg-teal-600 text-white shadow\"\r\n            : \"bg-white/70 text-slate-700 hover:bg-slate-100 border border-slate-200\",\r\n        ].join(\" \")}\r\n        aria-pressed={active}\r\n      >\r\n        {label}\r\n      </button>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div className=\"relative min-h-screen overflow-hidden bg-gradient-to-br from-slate-50 via-teal-50 to-cyan-50\">\r\n      <div className=\"pointer-events-none absolute -top-24 left-1/2 h-72 w-72 -translate-x-1/2 rounded-full bg-cyan-300/30 blur-3xl\" />\r\n      <div className=\"pointer-events-none absolute -bottom-24 right-10 h-72 w-72 rounded-full bg-teal-300/30 blur-3xl\" />\r\n\r\n      <div className=\"relative z-20 mx-auto flex min-h-screen max-w-7xl items-center justify-center px-4\">\r\n        <motion.div\r\n          initial={{ opacity: 0, y: 14 }}\r\n          animate={{ opacity: 1, y: 0 }}\r\n          transition={{ duration: 0.45, ease: \"easeOut\" }}\r\n          className=\"w-full max-w-md\"\r\n        >\r\n          <div className=\"pointer-events-auto rounded-3xl border border-white/60 bg-white/70 p-8 shadow-2xl backdrop-blur-xl\">\r\n            <div className=\"mb-6 text-center\">\r\n              <h1 className=\"bg-gradient-to-r from-teal-600 via-cyan-600 to-sky-600 bg-clip-text text-3xl font-extrabold tracking-tight text-transparent\">\r\n                Qazaq Mind\r\n              </h1>\r\n              <p className=\"mt-1 text-sm text-slate-600\">Тіркеу</p>\r\n            </div>\r\n\r\n            {err && (\r\n              <div className=\"mb-4 rounded-xl border border-red-100 bg-red-50 px-4 py-3 text-sm text-red-700\">\r\n                {err}\r\n              </div>\r\n            )}\r\n\r\n            <form onSubmit={onSubmit} className=\"space-y-4\">\r\n              <div>\r\n                <label className=\"mb-1 block text-sm font-medium text-slate-700\">Логин</label>\r\n                <input\r\n                  className=\"w-full rounded-xl border border-slate-200 bg-white/80 px-4 py-3 text-slate-900 outline-none transition focus:border-teal-400 focus:bg-white focus:shadow-[0_0_0_4px_rgba(13,148,136,0.08)]\"\r\n                  placeholder=\"username\"\r\n                  value={form.username}\r\n                  onChange={(e) => setForm({ ...form, username: e.target.value })}\r\n                  autoComplete=\"username\"\r\n                  required\r\n                />\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"mb-1 block text-sm font-medium text-slate-700\">Құпиясөз</label>\r\n                <div className=\"relative\">\r\n                  <input\r\n                    className=\"w-full rounded-xl border border-slate-200 bg-white/80 px-4 py-3 pr-12 text-slate-900 outline-none transition focus:border-teal-400 focus:bg-white focus:shadow-[0_0_0_4px_rgba(13,148,136,0.08)]\"\r\n                    placeholder=\"password\"\r\n                    type={showPass ? \"text\" : \"password\"}\r\n                    value={form.password}\r\n                    onChange={(e) => setForm({ ...form, password: e.target.value })}\r\n                    autoComplete=\"new-password\"\r\n                    required\r\n                    minLength={6}\r\n                  />\r\n                  <button\r\n                    type=\"button\"\r\n                    onClick={() => setShowPass((s) => !s)}\r\n                    className=\"absolute inset-y-0 right-3 my-auto inline-flex h-8 w-8 items-center justify-center rounded-lg text-slate-500 hover:bg-slate-100\"\r\n                    aria-label={showPass ? \"Құпиясөзді жасыру\" : \"Құпиясөзді көрсету\"}\r\n                  >\r\n                    {showPass ? <EyeOffIcon /> : <EyeIcon />}\r\n                  </button>\r\n                </div>\r\n                <p className=\"mt-1 text-xs text-slate-500\">Минимум 6 cимвол.</p>\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"mb-1 block text-sm font-medium text-slate-700\">Құпиясөзді растау</label>\r\n                <div className=\"relative\">\r\n                  <input\r\n                    className=\"w-full rounded-xl border border-slate-200 bg-white/80 px-4 py-3 pr-12 text-slate-900 outline-none transition focus:border-teal-400 focus:bg-white focus:shadow-[0_0_0_4px_rgba(13,148,136,0.08)]\"\r\n                    placeholder=\"password\"\r\n                    type={showConfirm ? \"text\" : \"password\"}\r\n                    value={form.confirm}\r\n                    onChange={(e) => setForm({ ...form, confirm: e.target.value })}\r\n                    autoComplete=\"new-password\"\r\n                    required\r\n                    minLength={6}\r\n                  />\r\n                  <button\r\n                    type=\"button\"\r\n                    onClick={() => setShowConfirm((s) => !s)}\r\n                    className=\"absolute inset-y-0 right-3 my-auto inline-flex h-8 w-8 items-center justify-center rounded-lg text-slate-500 hover:bg-slate-100\"\r\n                    aria-label={showConfirm ? \"Құпиясөзді жасыру\" : \"Құпиясөзді көрсету\"}\r\n                  >\r\n                    {showConfirm ? <EyeOffIcon /> : <EyeIcon />}\r\n                  </button>\r\n                </div>\r\n              </div>\r\n\r\n              <div>\r\n                <div className=\"flex gap-2\">\r\n                  <RoleButton value=\"STUDENT\" label=\"Оқушы\" />\r\n                  <RoleButton value=\"TEACHER\" label=\"Мұғалім\" />\r\n                  <RoleButton value=\"PARENT\"  label=\"Ата-ана\" />\r\n                </div>\r\n              </div>\r\n\r\n              <button\r\n                type=\"submit\"\r\n                disabled={!canSubmit}\r\n                className=\"group relative mt-2 inline-flex w-full items-center justify-center gap-2 rounded-xl bg-gradient-to-r from-teal-600 to-cyan-600 px-5 py-3 font-semibold text-white shadow-lg transition hover:from-teal-500 hover:to-cyan-500 disabled:cursor-not-allowed disabled:opacity-70\"\r\n              >\r\n                {loading ? (\r\n                  <>\r\n                    <svg className=\"h-5 w-5 animate-spin\" viewBox=\"0 0 24 24\" aria-hidden=\"true\">\r\n                      <circle cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\" className=\"opacity-25 fill-transparent\" />\r\n                      <path d=\"M4 12a8 8 0 0 1 8-8\" className=\"opacity-75\" fill=\"currentColor\" />\r\n                    </svg>\r\n                    Тіркеу...\r\n                  </>\r\n                ) : (\r\n                  \"Тіркелу\"\r\n                )}\r\n              </button>\r\n            </form>\r\n\r\n            <nav className=\"mt-5 flex items-center justify-between text-sm text-slate-600 pointer-events-auto\">\r\n              <Link to=\"/login\" className=\"rounded-lg px-2 py-1 text-teal-700 hover:bg-teal-50 transition\">\r\n                Сізде аккаунт бар ма? Кіру\r\n              </Link>\r\n              <span className=\"text-slate-400\">•</span>\r\n            </nav>\r\n          </div>\r\n\r\n          <div className=\"mt-6 text-center text-xs text-slate-500\">\r\n            © {new Date().getFullYear()} Qazaq Mind\r\n          </div>\r\n        </motion.div>\r\n      </div>\r\n    </div>\r\n  );\r\n}"],"names":["EyeIcon","className","jsxs","jsx","EyeOffIcon","Register","nav","useNavigate","register","useAuth","form","setForm","useState","showPass","setShowPass","showConfirm","setShowConfirm","loading","setLoading","err","setErr","usernameTrimmed","canSubmit","onSubmit","e","RoleButton","value","label","active","f","motion","Fragment","Link"],"mappings":"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"}